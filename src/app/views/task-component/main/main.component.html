<app-nav>

</app-nav>
<main>
  <div class="container-fluid">
    <div class="row">
      <div id="main" class="col-12">
        <h1 class="title">
          Danh Sách Yêu Cầu
        </h1>
        <button class="btn btn-success btn-add" (click)="add.showModal()">
          <fa-icon [icon]="['fas', 'plus-square']"></fa-icon>
          Thêm
        </button>
        <table class="table table-bordered text-center">
          <thead>
            <tr>
              <th scope="col">STT</th>
              <th scope="col">Họ và Tên</th>
              <th scope="col">Mã số sinh viên</th>
              <th scope="col">Loại yêu cầu</th>
              <th scope="col">Số lượng</th>
              <th scope="col">Ghi chú</th>
              <th scope="col">Ngày yêu cầu</th>
              <th scope="col">Trạng thái</th>
              <th scope="col"></th> 
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let task of stuentTasks;  let i = index">
              <td scope="row">{{i+1}}</td>
              <td>{{task.student?.fullName}}</td>
              <td>{{task.student?.studentId}}</td>
              <td>{{task.requestType?.description}}</td>
              <td>{{task.quantity}}</td>
              <td>{{task.note}}</td>
              <td>{{task.createDate |date: 'dd/MM/yyyy'}}</td>
              <td>
                <span [ngClass]="task.status==1 ? 'send': task.status==2 ? 'doing':'success' ">
                  {{task.status |taskstatus}}
                </span>

              </td>
              <td>
                <button class="btn btn-danger" *ngIf="task.status==1"
                (click) ="removeItem(task.id)">
                  <fa-icon [icon]="['fas', 'trash-alt']">
                  </fa-icon>
                </button></td>
            </tr>
            <tr *ngIf="stuentTasks.length ==0">
              <td colspan="8" class="empty">
                Hiện tại bạn chưa có yêu cầu nào
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</main>

<app-footer-component></app-footer-component>

<app-add-component #add [student]="student" (checkLoad)="load($event)"></app-add-component>